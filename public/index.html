<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>틀린그림찾기 게임</title>
  <meta name="description" content="두 이미지를 비교하여 틀린 부분을 찾는 재미있는 웹 게임입니다.">
  
  <!-- CSS 파일 연결 -->
  <link rel="stylesheet" href="../src/css/reset.css">
  <link rel="stylesheet" href="../src/css/styles.css">
  
  <!-- 파비콘 -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  
  <!-- Supabase JS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="app-container">
    <!-- 헤더 영역 -->
    <header class="header">
      <div class="header-content">
        <h1 class="logo">틀린그림찾기</h1>
        <nav class="main-nav">
          <ul>
            <li><a href="#" id="nav-home" class="active">홈</a></li>
            <li><a href="#" id="nav-play">게임하기</a></li>
            <li><a href="#" id="nav-leaderboard">랭킹</a></li>
            <li><a href="#" id="nav-about">소개</a></li>
          </ul>
        </nav>
        <div class="auth-section">
          <!-- 로그인 전 -->
          <div id="auth-login-section" class="auth-login">
            <button id="login-button" class="btn btn-login">
              <img src="../src/assets/google-icon.svg" alt="Google" class="login-icon">
              로그인
            </button>
          </div>
          
          <!-- 로그인 후 -->
          <div id="auth-user-section" class="auth-user hidden">
            <div class="user-profile">
              <img id="user-avatar" src="" alt="사용자 프로필" class="user-avatar">
              <span id="user-name">사용자</span>
            </div>
            <button id="logout-button" class="btn btn-logout">로그아웃</button>
          </div>
        </div>
      </div>
    </header>
    
    <!-- 메인 콘텐츠 영역 -->
    <main class="main-content">
      <!-- 홈 화면 -->
      <section id="home-section" class="section">
        <div class="hero">
          <h2>틀린 부분을 찾아보세요!</h2>
          <p>두 이미지를 비교하고 숨겨진 차이점을 모두 찾는 재미있는 게임</p>
          <button id="play-now-btn" class="btn btn-primary">지금 플레이하기</button>
        </div>
        
        <div class="featured-games">
          <h3>추천 게임</h3>
          <div class="game-grid" id="featured-games-grid">
            <!-- 추천 게임 목록이 동적으로 표시될 곳 -->
            <div class="game-loading">로딩 중...</div>
          </div>
        </div>
      </section>
      
      <!-- 게임 선택 화면 -->
      <section id="game-select-section" class="section hidden">
        <h2>게임 선택</h2>
        <div class="difficulty-filter">
          <span>난이도:</span>
          <button class="btn btn-filter active" data-difficulty="all">전체</button>
          <button class="btn btn-filter" data-difficulty="1">쉬움</button>
          <button class="btn btn-filter" data-difficulty="2">보통</button>
          <button class="btn btn-filter" data-difficulty="3">어려움</button>
        </div>
        
        <div class="game-grid" id="game-select-grid">
          <!-- 게임 목록이 동적으로 표시될 곳 -->
          <div class="game-loading">로딩 중...</div>
        </div>
      </section>
      
      <!-- 게임 플레이 화면 -->
      <section id="game-play-section" class="section hidden">
        <div class="game-header">
          <h2 id="game-title">게임 제목</h2>
          <div class="game-stats">
            <div class="stat-item">
              <span class="stat-label">시간:</span>
              <span id="game-time" class="stat-value">00:00</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">발견:</span>
              <span id="found-count" class="stat-value">0/5</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">점수:</span>
              <span id="current-score" class="stat-value">0</span>
            </div>
          </div>
        </div>
        
        <div class="game-container">
          <div class="image-container">
            <div class="image-wrapper left-image">
              <img id="original-image" src="" alt="원본 이미지" class="game-image">
              <div class="difference-markers"></div>
            </div>
            <div class="image-wrapper right-image">
              <img id="modified-image" src="" alt="수정된 이미지" class="game-image">
              <div class="difference-markers"></div>
            </div>
          </div>
          
          <div class="game-controls">
            <button id="hint-button" class="btn btn-hint" disabled>힌트 사용</button>
            <button id="exit-game-button" class="btn btn-secondary">게임 나가기</button>
          </div>
        </div>
        
        <!-- 게임 완료 모달 -->
        <div id="game-complete-modal" class="modal hidden">
          <div class="modal-content">
            <h3>게임 완료!</h3>
            <div class="game-results">
              <p>걸린 시간: <span id="result-time">00:00</span></p>
              <p>획득 점수: <span id="result-score">0</span></p>
            </div>
            <div class="modal-buttons">
              <button id="play-again-button" class="btn btn-primary">다시 플레이</button>
              <button id="select-other-button" class="btn btn-secondary">다른 게임 선택</button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 랭킹 화면 -->
      <section id="leaderboard-section" class="section hidden">
        <h2>랭킹</h2>
        <div class="leaderboard-filters">
          <select id="leaderboard-game-select" class="leaderboard-filter">
            <option value="all">모든 게임</option>
            <!-- 게임 목록이 동적으로 추가될 곳 -->
          </select>
          
          <select id="leaderboard-time-select" class="leaderboard-filter">
            <option value="all-time">전체 기간</option>
            <option value="this-week">이번 주</option>
            <option value="today">오늘</option>
          </select>
        </div>
        
        <table class="leaderboard-table">
          <thead>
            <tr>
              <th>순위</th>
              <th>사용자</th>
              <th>게임</th>
              <th>점수</th>
              <th>시간</th>
              <th>날짜</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body">
            <!-- 랭킹 데이터가 동적으로 표시될 곳 -->
            <tr>
              <td colspan="6" class="loading-cell">로딩 중...</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- 소개 화면 -->
      <section id="about-section" class="section hidden">
        <h2>게임 소개</h2>
        <div class="about-content">
          <div class="about-text">
            <h3>틀린그림찾기 게임이란?</h3>
            <p>
              두 개의 비슷한 이미지를 비교하여 숨겨진 차이점을 모두 찾는 게임입니다.
              다양한 난이도와 테마의 이미지가 준비되어 있으며, 빠르게 모든 차이점을
              발견할수록 높은 점수를 획득할 수 있습니다.
            </p>
            
            <h3>게임 방법</h3>
            <ol>
              <li>게임을 선택합니다.</li>
              <li>두 이미지를 비교하며 틀린 부분을 찾습니다.</li>
              <li>틀린 부분을 발견하면 해당 위치를 클릭합니다.</li>
              <li>모든 틀린 부분을 찾으면 게임이 종료됩니다.</li>
            </ol>
            
            <h3>점수 계산 방식</h3>
            <p>
              기본 점수 + (난이도 배수 × 시간 보너스)<br>
              빠르게 완료할수록 더 높은 점수를 얻을 수 있습니다!
            </p>
          </div>
          
          <div class="about-image">
            <img src="../src/assets/game-example.jpg" alt="게임 예시 이미지">
          </div>
        </div>
      </section>
      
      <!-- 관리자 화면 (관리자 로그인 시에만 표시) -->
      <section id="admin-section" class="section hidden">
        <h2>관리자 도구</h2>
        
        <div class="admin-tools">
          <div class="tool-card">
            <h3>이미지 세트 관리</h3>
            <p>새로운 이미지 세트 추가 및 기존 세트 관리</p>
            <button id="manage-images-btn" class="btn btn-primary">이미지 관리</button>
          </div>
          
          <div class="tool-card">
            <h3>틀린 부분 감지 도구</h3>
            <p>이미지 비교 및 틀린 부분 자동 감지</p>
            <button id="difference-tool-btn" class="btn btn-primary">도구 실행</button>
          </div>
          
          <div class="tool-card">
            <h3>사용자 관리</h3>
            <p>사용자 정보 및 계정 관리</p>
            <button id="manage-users-btn" class="btn btn-primary">사용자 관리</button>
          </div>
        </div>
        
        <!-- 이미지 업로드 폼 (관리자 도구 내부) -->
        <div id="image-upload-form" class="admin-form hidden">
          <h3>새 이미지 세트 추가</h3>
          
          <div class="form-group">
            <label for="image-title">제목</label>
            <input type="text" id="image-title" required>
          </div>
          
          <div class="form-group">
            <label for="image-description">설명</label>
            <textarea id="image-description" rows="3"></textarea>
          </div>
          
          <div class="form-group">
            <label for="image-difficulty">난이도</label>
            <select id="image-difficulty">
              <option value="1">쉬움 (1)</option>
              <option value="2">보통 (2)</option>
              <option value="3">어려움 (3)</option>
              <option value="4">매우 어려움 (4)</option>
              <option value="5">극한 (5)</option>
            </select>
          </div>
          
          <div class="image-upload-container">
            <div class="image-upload">
              <h4>원본 이미지</h4>
              <div class="image-preview" id="original-image-preview">
                <span class="preview-placeholder">이미지 없음</span>
              </div>
              <input type="file" id="original-image-upload" accept="image/*">
              <label for="original-image-upload" class="btn btn-secondary">이미지 선택</label>
            </div>
            
            <div class="image-upload">
              <h4>수정된 이미지</h4>
              <div class="image-preview" id="modified-image-preview">
                <span class="preview-placeholder">이미지 없음</span>
              </div>
              <input type="file" id="modified-image-upload" accept="image/*">
              <label for="modified-image-upload" class="btn btn-secondary">이미지 선택</label>
            </div>
          </div>
          
          <div class="form-actions">
            <button id="detect-differences-btn" class="btn btn-secondary" disabled>차이점 감지</button>
            <button id="save-image-set-btn" class="btn btn-primary" disabled>저장</button>
            <button id="cancel-upload-btn" class="btn btn-text">취소</button>
          </div>
        </div>
      </section>
    </main>
    
    <!-- 푸터 영역 -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2025 틀린그림찾기 게임. All rights reserved.</p>
        <div class="footer-links">
          <a href="#" id="privacy-link">개인정보처리방침</a>
          <a href="#" id="terms-link">이용약관</a>
          <a href="#" id="contact-link">문의하기</a>
        </div>
      </div>
    </footer>
  </div>
  
  <!-- 스크립트 파일 연결 -->
  <script type="module" src="../src/js/app.js"></script>
</body>
</html> 